<div
  style="
    width: 297mm;
    height: 210mm;
    padding: 2.5mm 5.5mm;
    border: 1px solid black;
    background: white;
  ">
  <div style="
    width: 100%;
    height: 100%;
    border: 0.75px;
    background: transparent;
  ">
    <ng-container
      *ngIf="operations.length <= 0">
      <div
        class="mod-text">Нет созданных операций</div>
    </ng-container>
    <ng-container
      *ngIf="operations.length > 0">
      <ng-container *ngFor="let operation of operations; index as i">
        <div
          class="tree-operation mod-padding-left mod-margin-top">
          <div
            [class.mod-frame]="i === selectedOperationId"
            [class.mod-frame--selected]="i === selectedOperationId"
            (click)="selectOperation(i)"
            class="tree-row mod-text mod-pointer">Операция {{ i + 1 }} - {{ operation.group.name }}</div>
          <div  *ngFor="let transition of operation.transitions; index as j"
                class="mod-indent-left">
            <div  (click)="selectTransition(j)"
                  [class.mod-frame]="j === selectedTransitionId"
                  [class.mod-frame--selected]="j === selectedTransitionId"
                  class="tree-row mod-pointer">
              <span class="mod-text">*</span>
              <span class="mod-text">{{ transition.action.name.toLowerCase() }} </span>
              <span class="mod-text">{{ transition.object.fullname.toLowerCase() }} </span>
              <span class="mod-text">{{ transition.id }}</span>
              <span class="mod-text"
                    *ngIf="transition.measures.length > 0">, выдерживая размеры </span>
              <ng-container *ngFor="let measure of transition.measures">
                <span class="mod-text">{{ measure.name }}={{ measure.value }} мм</span>
              </ng-container>
            </div>
              <div
                (click)="selectOperation(i)"
                class="tree-row mod-pointer">
                <span class="mod-text">*</span>
                <span class="mod-text">{{ operation.instrument.name }}, </span>
                <span class="mod-text">{{ operation.equipment.name }}, </span>
                <span class="mod-text">{{ operation.control.name }} </span>
              </div>
          </div>
          <div
            class="mod-indent-left">
            <input
              class="mod-margin mod-button"
              type="button"
              value="+ Добавить переход"
              (click)="selectTransition(0)" />
          </div>
        </div>
      </ng-container>
    </ng-container>
    <input
       class="mod-margin mod-button"
       type="button"
       value="+ Добавить операцию"
       (click)="selectOperation(0)" />
    <input
      *ngIf="operations.length > 0"
      class="mod-margin mod-button"
      type="button"
      value="x Удалить всё"
      (click)="clearAll()"/>
  </div>
</div>
<app-flyout
  #flyout
  [class.mod-invisible]="!(selectedOperationId >= 0 || selectedTransitionId >= 0)">
  <ng-container
    *ngIf="!flyout.isOpened">
    <div class="container-fluid">
      <div class="row">
        <div class="col-1">
          <input
            class="mod-margin mod-button"
            type="button"
            value="Открыть"
            (click)="flyout.open()"/>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-container
    *ngIf="flyout.isOpened">
    <div class="container-fluid">
      <div class="row">
        <div class="col-1">
          <input
            class="mod-margin mod-button"
            type="button"
            value="Закрыть"
            (click)="closeFlyout()"/>
        </div>
        <div class="col-11">
          <div class="container-fluid">
            <div class="row">
              <operation-manager
                *ngIf="selectedOperationId >= 0"
                [operationId]="selectedOperationId"
                (addOperation)="onAddOperation($event)"
                class="col mod-block mod-frame">
              </operation-manager>
            </div>
            <div class="row">
              <transition-manager
                *ngIf="selectedTransitionId >= 0"
                class="col mod-block mod-frame">
              </transition-manager>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</app-flyout>

